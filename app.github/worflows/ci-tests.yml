name: ğŸ§ª CI - Tests et Validation

on:
  pull_request:
    branches: [ main, develop ]
  push:
    branches: [ main, develop, feature/** ]

jobs:
  code-validation:
    name: ğŸ” Validation du Code
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ TÃ©lÃ©charger le code
      uses: actions/checkout@v4
      
    - name: ğŸ—ï¸ VÃ©rifier la structure
      run: |
        echo "Validation de la structure du projet..."
        
        # VÃ©rifier les fichiers essentiels
        if [ ! -f "index.html" ]; then
          echo "âŒ Fichier index.html manquant"
          exit 1
        fi
        
        # Valider la structure HTML
        if ! grep -q "<!DOCTYPE html>" index.html; then
          echo "âŒ DOCTYPE HTML manquant"
          exit 1
        fi
        
        if ! grep -q "</html>" index.html; then
          echo "âŒ Balise fermante </html> manquante"
          exit 1
        fi
        
        echo "âœ… Structure HTML valide"
        
    - name: ğŸ“ Analyse de qualitÃ©
      run: |
        echo "Analyse de qualitÃ© du code..."
        
        # VÃ©rifier la taille des fichiers
        FILE_SIZE=$(stat -f%z index.html 2>/dev/null || stat -c%s index.html 2>/dev/null)
        echo "Taille du fichier index.html: $FILE_SIZE bytes"
        
        # Compter les lignes de code
        LINES=$(wc -l < index.html)
        echo "Nombre de lignes: $LINES"
        
        echo "âœ… Analyse de qualitÃ© terminÃ©e"
        
    - name: ğŸ“Š Rapport CI
      run: |
        echo "ğŸ‰ PHASE CI TERMINÃ‰E AVEC SUCCÃˆS"
        echo "ğŸ“ˆ Statut: PRÃŠT PLE DÃ‰PLOIEMENT"
        echo "ğŸ” RÃ©sultats:"
        echo "   - âœ… Structure validÃ©e"
        echo "   - âœ… HTML vÃ©rifiÃ©"
        echo "   - âœ… QualitÃ© confirmÃ©e"