name: ğŸŒ CD - DÃ©ploiement Automatique

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # Permet de dÃ©clencher manuellement

jobs:
  deploy:
    name: ğŸš€ DÃ©ploiement Production
    runs-on: ubuntu-latest
    environment: production
    
    steps:
    - name: ğŸ“¥ TÃ©lÃ©charger le code
      uses: actions/checkout@v4
      
    - name: ğŸ·ï¸ Informations de dÃ©ploiement
      run: |
        echo "DÃ©ploiement en cours..."
        echo "Repository: ${{ github.repository }}"
        echo "Ref: ${{ github.ref }}"
        echo "SHA: ${{ github.sha }}"
        echo "DÃ©clenchÃ© par: ${{ github.actor }}"
        
    - name: ğŸš€ DÃ©ployer sur GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./
        force_orphan: true
        
    - name: ğŸ“¢ Notification de succÃ¨s
      run: |
        echo "ğŸ‰ DÃ‰PLOIEMENT RÃ‰USSI !"
        echo "ğŸŒ Votre application est maintenant en ligne sur:"
        echo "   https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}/"
        echo ""
        echo "ğŸ“¦ DÃ©tails:"
        echo "   - Branche: ${{ github.ref }}"
        echo "   - Commit: ${{ github.sha }}"
        echo "   - Temps: $(date)"